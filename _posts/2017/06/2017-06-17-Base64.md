---
layout: post
title: "Base64"
date: 2017-06-17 17:04
image: ''
description: ''
tags:
- Base64
- Encoding
categories:
- Programming
---

# Base64
8비트 바이너리 데이터를 [문자코드](https://ko.wikipedia.org/wiki/%EB%AC%B8%EC%9E%90_%EC%9D%B8%EC%BD%94%EB%94%A9)(ASCII, 유니코드 등)에 상관없이 공통 ASCII 문자들로만 이루어진 일련의 문자열로 바꾸는 인코딩
Base64는 뜻 그대로 64진법입니다.
64진법은 2의 제곱수인 2^6이며, 알파벳(A-Z, a-z), 숫자, 마지막 두 개의 어떤 기호를 쓰느냐의 순서로 총 64개로 구성되어있습니다.
Base64는 처음 설계될 때, 8비트 문자열을 6비트 문자열로 변경하기 위해 6과 8의 최소공배수인 24 bit = 3 bytes를 입력하면 4개의 문자열이 출력되도록 설계되었습니다.
만약 3바이트 미만일 경우는 '='(2bit) 패딩문자를 채웁니다. 3바이트 미만인 경우의 수는 1 또는 2바이트만 존재하기 때문에 1바이트인 경우는 2bit가 남아서 패딩문자가 1개, 2바이트인 경우에는 4bit가 남아서 패딩문자를 2개만 채웁니다. 패딩문자를 채우는 이유는 8비트를 6비트로 잘라서 만들기 때문에 디코딩시 기존의 데이터 손실이 일어날 수 있어서 패딩문자를 채워서 데이터 손실을 방지합니다.

![Base64 공식]({{ site.url }}/assets/img/post_image/{{ page.date | date: "%Y" }}/{{ page.date | date: "%m" }}/base64_formula.png)
위의 공식에 따라 1 byte를 입력하게 되면 4/3개의 문자열이 출력됩니다. 즉, 기존의 입력받는 문자열보다 Base64로 인코딩될 경우, 1.333배의 문자열의 길이가 증가합니다.

# Base64를 사용하는 이유
컴퓨터는 0과 1만으로 이루어진 이진수(기계어)만 이해할 수 있습니다. 컴퓨터가 A, B와 같은 문자를 이해하기 위해서는 문자를 이진수로 변경을 해주어야하는데 문자에 해당하는 숫자를 규칙으로 정한 것을 'ASCII' 라고 합니다. ASCII는 7비트로 인코딩합니다. ASCII를 만들게된 이유는 초기 SMTP 프로토콜은 7비트로만 전송하게 설계되었습니다. ASCII 코드만 준수하면 SMTP 프로토콜에서 텍스트를 주고 받는데에는 전혀 문제가 없었지만, 사람들이 텍스트가 아닌 이미지, 문서파일 등등 바이너리 데이터를 전송해야될 경우가 생깁니다. 바이너리 데이터는 8비트로 되어있기 때문에 해당 프로토콜로 전송할 수가 없게 되어 8비트 이상의 코드를 전송하기 위해 인터넷 표준 포맷으로 [MIME](https://ko.wikipedia.org/wiki/MIME)가 만들어지게 된다.


## Base64 인코딩 방법
1. 문자에 해당하는 아스키코드로 변환
2. 아스키코드를 2진수로 변환(8비트)
3. 변환한 2진수를 6비트씩 자르고 남는 비트는 0으로 채운다.
4. 2진수를 다시 10진수로 변환
5. 10진수에 해당하는 Base64 코드값으로 변환

Hong 이라는 문자를 Base64로 변환하면

>  H   o   n   g <br/>
> 72 111 110 103 => 해당하는 문자에 대한 아스키코드값으로 변환 <br/> d
01001000 01101111 01101110 01100111 => 아스키코드값을 이진수로 변환 <br/>
010010 000110 111101 101110 011001 11(0000) => 변환된 이진수를 6비트씩 끊어서 표현 괄호친 부분은 6비트로 채우기 위해 남는 부분은 '=' 로 채웁니다. 이렇게 하는 이유는 원본으로 다시 디코딩할 때, 원본에는 없던 비트가 생김을 방지하기 위해서입니다. <br/>
18 6 61 46 25 48 => 10진수로 표현 <br/>
S G 9 u Z w == => 10진수를 아래의 Base64 코드값으로 매칭시키면 인코딩 완료 <br/>

![Base64 색인표]({{ site.url }}/assets/img/post_image/{{ page.date | date: "%Y" }}/{{ page.date | date: "%m" }}/base64_index.png){:height="40%" width="40%"}




--------------------------------
<br/>


### 참고문서
* [위키백과 - Base64](https://ko.wikipedia.org/wiki/%EB%B2%A0%EC%9D%B4%EC%8A%A464)
* [위키백과 - 8Bit Clean](https://en.wikipedia.org/wiki/8-bit_clean)
* [MIME(Multipurpose Internet Mail Extensions) - RFC2045](https://tools.ietf.org/html/rfc2045)
